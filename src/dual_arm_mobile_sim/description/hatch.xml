<mujoco model="hatch">
  <compiler angle="radian" meshdir="assets"/>

  <asset>
    <mesh name="ivr_hatch_frame_visual" file="trainer_hatch/visual/ivr_hatch_frame_no_left.stl"/>
    <mesh name="hatch_4060_frame_visual" file="trainer_hatch/visual/hatch_4060_frame.stl"/>
    <mesh name="hatch_4060_frame" file="trainer_hatch/collision/hatch_4060_frame.stl"/>
    <mesh name="hatch_4060_collision" file="trainer_hatch/collision/hatch_4060_collision.stl"/>
    <mesh name="hatch_4060_visual" file="trainer_hatch/visual/hatch_4060_face.stl"/>
    <mesh name="crank_wheel" file="trainer_hatch/collision/crank_wheel.stl"/>
    <mesh name="crank_handle" file="trainer_hatch/collision/crank_handle.stl"/>
    <mesh name="grab_handle" file="trainer_hatch/collision/grab_handle.stl"/>
  </asset>

  <worldbody>
    <!--Hatch Frame/Structure-->
    <geom class="visual" pos="0.0 1.845 0.0" quat="-0.707527 0 0 0.706686" rgba="0.85 0.85 0.85 1" mesh="ivr_hatch_frame_visual"/>
    <geom size="10 10 0.005" pos="0 0 -0.005" type="box" rgba="1 1 1 0.075" group="3"/>
    <geom size="10 10 0.005" pos="0 0 2.75" type="box" rgba="1 1 1 0.075" group="3"/>
    <geom size="0.3375 0.6535 0.02" pos="0.641617 1.51472 0.02" quat="-0.706686 0 0 0.707527" type="box" group="3"/>
    <geom size="0.05 0.6535 0.24765" pos="0.641959 1.80222 0.24765" quat="-0.706686 0 0 0.707527" type="box" group="3"/>
    <geom size="0.05 0.6535 0.24765" pos="0.641272 1.22422 0.24765" quat="-0.706686 0 0 0.707527" type="box" group="3"/>
    <geom size="0.3375 0.05 1.0541" pos="0.0281174 1.51545 1.0541" quat="-0.706686 0 0 0.707527" type="box" group="3"/>
    <geom size="0.3375 0.05 0.24765" pos="1.25812 1.51399 0.24765" quat="-0.706686 0 0 0.707527" type="box" group="3"/>
    <geom size="0.05 0.05 1.0541" pos="1.25777 1.22299 1.0541" quat="-0.706686 0 0 0.707527" type="box" group="3"/>
    <geom size="0.05 0.6535 0.0985" pos="0.641259 1.21322 2.0115" quat="-0.706686 0 0 0.707527" type="box" group="3"/>
    <geom size="0.3375 0.6535 0.24765" pos="0.641617 1.51472 0.25765" quat="-0.706686 0 0 0.707527" type="box" group="3" rgba="0.85 0.85 0.85 1"/>
    <geom class="collision" pos="1.23282 1.26719 0.7113" quat="-0.707527 0 0 -0.706686" type="mesh" rgba="0.85 0.85 0.85 1" mesh="hatch_4060_frame"/>
    <geom class="visual" pos="1.23282 1.26719 0.7113" quat="-0.707527 0 0 -0.706686" rgba="0.85 0.85 0.85 1" mesh="hatch_4060_frame_visual"/>
    <!-- Need to do convex decomp if I want to add this back in or the hatch door will be in collision with the frame -->
    <!-- <geom class="collision" pos="0.0447126 1.17493 0.716" quat="-0.706686 0 0 0.707527" rgba="0.85 0.85 0.85 1" mesh="hatch_4060_frame"/> -->
    <geom class="visual" pos="0.0447126 1.17493 0.716" quat="-0.706686 0 0 0.707527" rgba="0.85 0.85 0.85 1" mesh="hatch_4060_frame_visual"/>
    
    <!--Hatch door-->
    <body name="hatch_face" pos="1.2584 1.09079 0.7617" quat="-0.706686 0 0 0.707527">
      <inertial pos="-0.0414437 -0.947764 0.613416" quat="0.875941 0.464726 0.049766 -0.119502" mass="1.22599" diaginertia="1.15523 1.14551 1.01644"/>
      <joint name="hatch_outer_frame_face_joint" pos="0 0 0" axis="0 0 1" range="0 1.65806" actuatorfrcrange="-10 10"/>
      <geom class="collision" rgba="0.85 0.85 0.85 1" mesh="hatch_4060_collision"/>
      <geom class="visual" rgba="0.85 0.85 0.85 1" mesh="hatch_4060_visual"/>
      <geom pos="-0.07 -1.0273 0.6887" quat="0 0 0.707107 0.707107" type="mesh" rgba="0 0 1 1" mesh="grab_handle"/>
      <geom pos="-0.058 -0.9016 0.7971" quat="1 0 0 0" type="mesh" rgba="0 0 1 1" mesh="grab_handle"/>
      <geom pos="-0.058 -1.078 0.6957" quat="0.707107 0.707107 0 0" type="mesh" rgba="0 0 1 1" mesh="grab_handle"/>
      <body name="external_rotary_wheel" pos="-0.17161 -0.9474 0.4325" quat="0.707107 0 -0.707107 0">
        <joint name="external_rotary_joint" pos="0 0 0" axis="0 0 1" range="0 6.28" actuatorfrcrange="-10 10"/>
        <geom type="mesh" rgba="0 0 1 1" mesh="crank_wheel"/>
        <body name="external_rotary_handle" pos="0 0.053975 0.0155">
          <joint name="external_rotary_handle_joint" pos="0 0 0" axis="1 0 0" range="0 1.57" actuatorfrcrange="-10 10"/>
          <geom pos="0 0 0.00355" quat="1 0 0 0" type="mesh" rgba="0 0 1 1" mesh="crank_handle"/>
        </body>
      </body>
      <body name="internal_rotary_wheel" pos="0.04431 -0.9474 0.4265" quat="0.707107 0 0.707107 0">
        <joint name="internal_rotary_joint" pos="0 0 0" axis="0 0 1" range="0 6.28" actuatorfrcrange="-10 10"/>
        <geom type="mesh" rgba="0 0 1 1" mesh="crank_wheel"/>
        <body name="internal_rotary_handle" pos="0 0.053975 0.0155">
          <joint name="internal_rotary_handle_joint" pos="0 0 0" axis="1 0 0" range="0 1.57" actuatorfrcrange="-10 10"/>
          <geom pos="0 0 0.00355" quat="1 0 0 0" type="mesh" rgba="0 0 1 1" mesh="crank_handle"/>
        </body>
      </body>
    </body>
  </worldbody>
</mujoco>
